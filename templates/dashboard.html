{% extends "base.html" %}
{% block content %}
<h3>Dashboard</h3>

<form method="post" class="card p-3 mb-4">
  <div class="row">
    <div class="col-md-3">
      <input name="room" class="form-control" placeholder="Sala" required>
    </div>
    <div class="col-md-3">
      <input name="cinema" class="form-control" placeholder="Cinema" required>
    </div>
    <div class="col-md-3">
      <input name="kind" class="form-control" placeholder="Tipo problema" required>
    </div>
    <div class="col-md-3">
      <select name="urgency" class="form-select">
        <option>Non urgente</option>
        <option>Sala ferma</option>
        <option>Urgente</option>
      </select>
    </div>
  </div>
  <textarea name="description" class="form-control mt-3" placeholder="Descrizione" required></textarea>
  <button class="btn btn-success mt-3">Aggiungi problema</button>
</form>

<table class="table table-bordered">
  <thead class="table-success">
    <tr>
      <th>ID</th><th>Cinema</th><th>Sala</th><th>Tipo</th><th>Urgenza</th><th>Stato</th><th>Autore</th><th>Azioni</th>
    </tr>
  </thead>
  <tbody>
    {% for issue in issues %}
    <tr>
      <td>{{ issue.id }}</td>
      <td>{{ issue.cinema }}</td>
      <td>{{ issue.room }}</td>
      <td>{{ issue.kind }}</td>
      <td>{{ issue.urgency }}</td>
      <td>{{ issue.status }}</td>
      <td>{{ issue.author }}</td>
      <td>
        <a href="{{ url_for('edit_issue', issue_id=issue.id) }}" class="btn btn-sm btn-primary">Modifica</a>
        <form action="{{ url_for('delete_issue', issue_id=issue.id) }}" method="post" style="display:inline">
          <button class="btn btn-sm btn-danger" onclick="return confirm('Eliminare?')">Elimina</button>
        </form>
      </td>
    </tr>
    {% else %}
    <tr><td colspan="8" class="text-center">Nessun problema registrato</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
