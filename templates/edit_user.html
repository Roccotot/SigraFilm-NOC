{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
  <h2>{% if user %}Modifica Utente{% else %}Nuovo Utente{% endif %}</h2>

  <form method="post">
    <div class="mb-3">
      <label for="username" class="form-label">Username</label>
      <input type="text" name="username" id="username" class="form-control"
             value="{{ user.username if user else '' }}" required>
    </div>

    <div class="mb-3">
      <label for="password" class="form-label">
        {% if user %}Nuova Password (lascia vuoto per non cambiare){% else %}Password{% endif %}
      </label>
      <input type="password" name="password" id="password" class="form-control" {% if not user %}required{% endif %}>
    </div>

    <div class="mb-3">
      <label for="role" class="form-label">Ruolo</label>
      <select name="role" id="role" class="form-select">
        <option value="user" {% if user and user.role == "user" %}selected{% endif %}>Utente</option>
        <option value="admin" {% if user and user.role == "admin" %}selected{% endif %}>Admin</option>
      </select>
    </div>

    <button type="submit" class="btn btn-primary">üíæ Salva</button>
    <a href="{{ url_for('admin_users') }}" class="btn btn-secondary">‚Ü©Ô∏è Annulla</a>
  </form>
</div>
{% endblock %}
