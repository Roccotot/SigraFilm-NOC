<!-- edit_user.html placeholder -->
{% extends "base.html" %}
{% block content %}
<h3>Gestione utenti</h3>

<form method="post" action="{{ url_for('admin_users_create') }}" class="card p-3 mb-3">
  <div class="row">
    <div class="col-md-3"><input name="username" class="form-control" placeholder="Username" required></div>
    <div class="col-md-3"><input name="password" type="password" class="form-control" placeholder="Password" required></div>
    <div class="col-md-3">
      <select name="role" class="form-select">
        <option value="user">User</option>
        <option value="admin">Admin</option>
      </select>
    </div>
    <div class="col-md-3"><button class="btn btn-success">Crea</button></div>
  </div>
</form>

<table class="table table-bordered">
  <thead class="table-success">
    <tr><th>ID</th><th>Username</th><th>Ruolo</th><th>Azioni</th></tr>
  </thead>
  <tbody>
    {% for u in users %}
    <tr>
      <td>{{ u.id }}</td>
      <td>{{ u.username }}</td>
      <td>{{ u.role }}</td>
      <td>
        <a href="{{ url_for('admin_users_edit', user_id=u.id) }}" class="btn btn-sm btn-primary">Modifica</a>
        <form action="{{ url_for('admin_users_delete', user_id=u.id) }}" method="post" style="display:inline">
          <button class="btn btn-sm btn-danger" onclick="return confirm('Eliminare utente?')">Elimina</button>
        </form>
      </td>
    </tr>
    {% else %}
    <tr><td colspan="4" class="text-center">Nessun utente</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
